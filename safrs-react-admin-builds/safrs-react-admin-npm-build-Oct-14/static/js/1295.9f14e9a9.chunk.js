"use strict";(self.webpackChunkreact_admin_upgrade=self.webpackChunkreact_admin_upgrade||[]).push([[1295],{21295:function(n,e,t){t.r(e),t.d(e,{ApiAdminHome:function(){return H},ApiGenerateField:function(){return I},ApiShow:function(){return B},ApiURL:function(){return E},ApiUserPasswordTab:function(){return b},CustomTab:function(){return X},CustomerLabel:function(){return G},DBConnection:function(){return W},EmployeeLabel:function(){return z},MyComp:function(){return d},SampleColumnField:function(){return J},UserPasswordField:function(){return K},UserPasswordTab:function(){return v}});var i=t(72791),r=t(1288),a=t(38302),s=t(28437),o=t(35614),l=t(25748),c=t(80184),d=function(n){return(0,c.jsx)("div",{children:"HMMMM"})},u=t(29439),h=t(26513),x=t(96015),m=t(75017),p=t(81898),g=t(73566),j=t(60195),Z=t(15296),f=t(47609),v=function(){var n=(0,Z.QZ)(),e=(0,f.d)(),t=(0,l.j)(),s=((0,g.x)(),(0,i.useState)("")),o=(0,u.Z)(s,2),d=o[0],v=o[1],b=(0,i.useState)(""),w=(0,u.Z)(b,2),y=w[0],C=w[1],S=(0,i.useState)(""),P=(0,u.Z)(S,2),_=P[0],N=P[1];return(0,c.jsx)(x.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(a.Z,{variant:"body2",component:"p",children:(0,c.jsx)("b",{children:"Change the user password"})})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(m.Z,{id:"outlined-password-input",label:"New Password",type:"password",onChange:function(n){var e=n.target.value;v(e),N(e===y&&e.length>5?"primary":""),console.log(e,y)}})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(m.Z,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:function(n){var e=n.target.value;C(e),N(d===e&&d.length>5?"primary":""),console.log(d,e)}})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(h.Z,{variant:"contained",color:_,onClick:function(){if(console.log(y),d===y)if(d.length<6)e("Password too short",{type:"warning"});else{var i={password:d};(0,j.t)("".concat(n.api_root,"/Users/").concat(t.id,"/change_password"),{method:"POST",body:JSON.stringify(i)}).then((function(){return e("Password Changed!")})).catch((function(){return e("Error Changing Password",{type:"warning"})}))}else e("Passwords don't match",{type:"warning"})},children:"Submit"})})]})})},b=function(){var n=(0,Z.QZ)(),e=(0,f.d)(),t=(0,l.j)(),s=((0,g.x)(),(0,i.useState)("")),o=(0,u.Z)(s,2),d=(o[0],o[1]),v=(0,i.useState)(""),b=(0,u.Z)(v,2),w=b[0],y=b[1],C=(0,i.useState)(""),S=(0,u.Z)(C,2),P=S[0],_=S[1],N=(0,i.useState)(""),k=(0,u.Z)(N,2),A=k[0],F=k[1];return(0,c.jsx)(x.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(a.Z,{variant:"body2",component:"p",children:(0,c.jsx)("b",{children:"Current user password"})})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(m.Z,{id:"outlined-password-input",label:"Current Password",type:"password",onChange:function(n){var e=n.target.value;d(e),F(e===P&&e.length>5?"primary":"")}})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(a.Z,{variant:"body2",component:"p",children:(0,c.jsx)("b",{children:"New user password"})})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(m.Z,{id:"outlined-password-input",label:"New Password",type:"password",onChange:function(n){var e=n.target.value;y(e),F(e===P&&e.length>5?"primary":"")}})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(m.Z,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:function(n){var e=n.target.value;_(e),F(w===e&&w.length>5?"primary":"")}})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(h.Z,{variant:"contained",color:A,onClick:function(){if(console.log(P),w===P)if(w.length<1)e("Password too short",{type:"warning"});else{var i={password:w};(0,j.t)("".concat(n.api_root,"/Users/").concat(t.id,"/change_password"),{method:"POST",body:JSON.stringify(i)}).then((function(){return e("Password Changed!")})).catch((function(){return e("Error Changing Password",{type:"warning"})}))}else e("Passwords don't match",{type:"warning"})},children:"Submit"})})]})})},w=t(1413),y=t(4942),C=t(18631),S=t(41971),P=t(107),_=t(38596),N=t(51911),k=t(29387),A=t(18152),F=t(72228),T=t(85078),M=t(86321),O=t(83492),L=t(72900),Q=t(50120),U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"75%",bgcolor:"background.paper",border:"0px solid #000",boxShadow:24,p:4,textAlign:"left"},q=(0,_.Z)({joined_field:{cursor:"pointer",color:"#3f51b5"},modalStyle:(0,y.Z)({position:"absolute",top:"10%",left:"10%",overflow:"scroll",height:"100%",display:"block",fontWeight:"0.6em"},"display","flex"),db_btn:{height:"80%",position:"relative",top:"50%","-webkit-transform":"translateY(-50%)","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)"},db_grid:{"& .MuiTextField-root":{borderBottom:"4px solid white",paddingBottom:"1em",paddingRight:"1em"}},actions:{textAlign:"center","& button":{width:"99%"}},conn_str:{backgroundColor:"#ccc",fontFamily:"Consolas"}}),D=function(n,e,t){var i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify(e||{})},r=Object.assign(i,t||{});return fetch(n,r)},R=function(n){var e=(0,Z.QZ)(),t=i.useState(!1),r=(0,u.Z)(t,2),s=r[0],o=r[1],l=i.useState(""),d=(0,u.Z)(l,2),x=d[0],m=d[1],p=i.useState(U),g=(0,u.Z)(p,2),j=g[0],f=g[1],v=n.record,b=q();return(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{onClick:function(n){o(!0),n.stopPropagation()},className:b.joined_field,title:" Relationship",children:(0,c.jsx)(N.Z,{})}),(0,c.jsx)(C.Z,{className:b.modalStyle,open:s,onClose:function(n){n.stopPropagation(),o(!1)},onClick:function(n){return n.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,c.jsxs)(S.Z,{sx:j,children:[(0,c.jsx)(a.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Create API"}),"Pressing the button will generate an API with the following properties:",(0,c.jsxs)("dl",{children:[(0,c.jsx)("dt",{children:"Name:"}),(0,c.jsx)("dd",{children:null===v||void 0===v?void 0:v.name}),(0,c.jsx)("dt",{children:"Database URL:"}),(0,c.jsx)("dd",{children:null===v||void 0===v?void 0:v.connection_string}),(0,c.jsx)("dt",{children:"Port:"}),(0,c.jsx)("dd",{children:null===v||void 0===v?void 0:v.port}),(0,c.jsx)("dt",{children:"Hostname:"}),(0,c.jsx)("dd",{children:null===v||void 0===v?void 0:v.hostname})]}),(0,c.jsxs)(h.Z,{variant:"outlined",onClick:function(){return function(n){var t="".concat(e.api_root,"/Apis/").concat(n.id,"/generate");m((0,c.jsx)(k.g,{})),j.top="90%",f(j),D(t).then((function(n){return n.json()})).then((function(n){m((0,c.jsx)("pre",{children:n}))}))}(v)},children:[" Start ",(0,c.jsx)(N.Z,{})," "]}),(0,c.jsx)("hr",{}),x]})})]})},I=function(n){return"list"===n.mode?(0,c.jsx)(R,(0,w.Z)({},n)):(0,c.jsx)(c.Fragment,{})},B=function(n){(0,l.j)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:"xxxx"}),n.show]})},V=function(n){var e=(0,T.cI)(),t=(0,l.j)(),s=t?t.connection_string:"",o=q(),d=i.useState(!1),x=(0,u.Z)(d,2),m=x[0],g=x[1],j=i.useState(U),f=(0,u.Z)(j,2),v=f[0],b=(f[1],i.useState(s)),w=(0,u.Z)(b,2),y=w[0],_=w[1],N=i.useState("user"),F=(0,u.Z)(N,2),R=F[0],I=F[1],B=i.useState("pass"),V=(0,u.Z)(B,2),W=V[0],Y=V[1],E=i.useState("dbhost"),H=(0,u.Z)(E,2),J=H[0],z=H[1],G=i.useState("dbname"),K=(0,u.Z)(G,2),X=K[0],$=K[1],nn=i.useState("Other"),en=(0,u.Z)(nn,2),tn=en[0],rn=en[1],an=i.useState(""),sn=(0,u.Z)(an,2),on=sn[0],ln=sn[1],cn=(0,Z.QZ)(),dn=function(){var n="".concat(tn,"://");return"Other"===tn?n=y:n+="sqlite"===tn?"/".concat(X):"".concat(R,":").concat(W,"@").concat(J,"/").concat(X),n};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5}),(0,c.jsx)(r.Z,{item:!0,xs:4,spacing:4,margin:5,children:(0,c.jsx)(A.o,{source:"connection_string",initialValue:dn(),helperText:"SQLAlchemy connection string syntax",fullWidth:!0})}),(0,c.jsx)(r.Z,{item:!0,xs:4,spacing:4,margin:5,children:(0,c.jsx)(h.Z,{variant:"outlined",onClick:function(){return g(!0)},color:"primary",size:"large",className:o.db_btn,children:"Configure Connection"})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5}),(0,c.jsx)(C.Z,{open:m,onClose:function(){return g(!1)},className:o.modalStyle,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,c.jsx)(S.Z,{sx:v,children:(0,c.jsxs)(r.Z,{container:!0,className:o.db_grid,children:[(0,c.jsxs)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:[(0,c.jsx)(a.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Database Configuration"}),(0,c.jsx)("hr",{})]}),(0,c.jsx)(r.Z,{item:!0,xs:6,spacing:4,margin:5,children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(Q.Z,{id:"demo-radio-buttons-group-label",children:"DB Dialect"}),(0,c.jsxs)(O.Z,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"Other",name:"radio-buttons-group",onChange:function(n){var e=n.target.value;rn(e),"sqlite"===e&&(I(""),Y(""),z(""))},children:[(0,c.jsx)(L.Z,{value:"mysql+pymysql",control:(0,c.jsx)(M.Z,{}),label:"MySQL"}),(0,c.jsx)(L.Z,{value:"oracle",control:(0,c.jsx)(M.Z,{}),label:"Oracle"}),(0,c.jsx)(L.Z,{value:"postgresql",control:(0,c.jsx)(M.Z,{}),label:"Postgres"}),(0,c.jsx)(L.Z,{value:"sqlite",control:(0,c.jsx)(M.Z,{}),label:"SQLite"}),(0,c.jsx)(L.Z,{value:"mssql+pyodbc",control:(0,c.jsx)(M.Z,{}),label:"SQLServer"}),(0,c.jsx)(L.Z,{value:"Other",control:(0,c.jsx)(M.Z,{}),label:"Manual:"})]}),(0,c.jsx)(P.Z,{id:"outlined-basic",label:"Manual",variant:"outlined",defaultValue:s,onChange:function(n){return _(n.target.value)},helperText:"Manual connection string configuration"})]})}),(0,c.jsxs)(r.Z,{item:!0,xs:6,spacing:4,margin:5,children:[(0,c.jsx)(P.Z,{label:"Username",variant:"outlined",onChange:function(n){return I(n.target.value)},value:R}),(0,c.jsx)(P.Z,{label:"Password",variant:"outlined",onChange:function(n){return Y(n.target.value)},value:W}),(0,c.jsx)(P.Z,{label:"Database host",variant:"outlined",onChange:function(n){return z(n.target.value)},value:J}),(0,c.jsx)(P.Z,{label:"Database name",variant:"outlined",onChange:function(n){return $(n.target.value)},value:X})]}),(0,c.jsx)(r.Z,{item:!0,xs:6,spacing:4,margin:5,children:(0,c.jsxs)(a.Z,{children:["Connection String: ",(0,c.jsx)("span",{className:o.conn_str,children:dn()})]})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,className:o.actions,children:(0,c.jsx)("hr",{})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5}),(0,c.jsx)(r.Z,{item:!0,xs:2,spacing:4,margin:5,className:o.actions,children:(0,c.jsx)(h.Z,{variant:"outlined",color:"primary",onClick:function(){return function(n){var e="".concat(cn.api_root,"/Apis/test_conn");D(e,{connection_string:n}).then((function(n){return n.json()})).then((function(n){ln((0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.Z,{variant:"h6",component:"h2",children:"Result:"}),(0,c.jsx)("pre",{children:n})]}))})).catch((function(n){return alert()}))}(dn())},children:" Test Connection"})}),(0,c.jsx)(r.Z,{item:!0,xs:2,spacing:4,margin:5,className:o.actions,children:(0,c.jsx)(h.Z,{variant:"outlined",color:"primary",onClick:function(){g(!1),e.change("connection_string",dn())},children:"Save & Close"})}),(0,c.jsx)(r.Z,{item:!0,xs:2,spacing:4,margin:5,className:o.actions,children:(0,c.jsx)(h.Z,{variant:"outlined",color:"primary",onClick:function(){return function(){if(void 0===t.id){var n="you must first save the api";return alert(n),void ln(n)}var e="".concat(cn.api_root,"/Apis/").concat(t.id,"/generate");ln((0,c.jsx)(k.g,{})),v.top="90%",D(e).then((function(n){return n.json()})).then((function(n){ln((0,c.jsx)("pre",{children:n}))}))}()},disabled:!t.id,title:t.id?"":"you must first save the api",children:"Generate API"})}),(0,c.jsx)(r.Z,{item:!0,xs:2,spacing:4,margin:5,className:o.actions,children:(0,c.jsx)(h.Z,{variant:"outlined",color:"primary",onClick:function(){return g(!1)},children:"Close"})}),(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,className:o.logdata,children:on})]})})})]})},W=function(n){var e=(0,l.j)(),t=e?e.connection_string:"";return"edit"!==n.mode&&"create"!==n.mode?(0,c.jsx)(a.Z,{children:t}):(0,c.jsx)(V,(0,w.Z)({},n))},Y=function(n){var e="/".concat(n.name,"/api");return(0,c.jsx)(a.Z,{children:(0,c.jsx)("a",{href:e,children:e})})},E=function(n){var e=(0,l.j)();(0,Z.QZ)();return e.id?Y(e):null},H=function(n){var e=(0,F.Y)("Apis",{pagination:{page:0,perPage:100}}),t=e.data,i=(e.total,e.isLoading,e.error,e.refetch,null===t||void 0===t?void 0:t.map((function(n){return(0,c.jsx)("li",{children:Y(n)})})));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.Z,{variant:"h6",component:"h2",children:" APIs"}),(0,c.jsx)(a.Z,{children:(0,c.jsx)("ul",{children:i})})]})},J=function(n){var e=n.attribute;return(0,c.jsx)(s.n,{source:e.name,style:{color:"red"}},e.name)},z=function(n){var e,t,i=n.instance;return(0,c.jsxs)("div",{children:[" ",null===(e=i.attributes)||void 0===e?void 0:e.FirstName," ",null===(t=i.attributes)||void 0===t?void 0:t.LastName]})},G=function(n){var e,t,i=n.instance;return(0,c.jsxs)("div",{children:[" ",(0,c.jsx)("b",{children:null===(e=i.attributes)||void 0===e?void 0:e.CompanyName})," ",(0,c.jsx)("i",{children:null===(t=i.attributes)||void 0===t?void 0:t.ContactName})]})},K=function(n){return"list"===n.mode?(0,c.jsx)("span",{}):"edit"===n.mode?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,c.jsx)(a.Z,{variant:"h6",component:"h6",children:"Change Password"})}),(0,c.jsxs)(r.Z,{item:!0,xs:4,spacing:4,margin:5,children:[(0,c.jsx)(o.W,{source:"_password"})," "]}),(0,c.jsxs)(r.Z,{item:!0,xs:4,spacing:4,margin:5,children:[(0,c.jsx)(o.W,{source:"_password"})," "]}),(0,c.jsx)(r.Z,{item:!0,xs:4,spacing:4,margin:5})]}):(0,c.jsx)(c.Fragment,{})},X=function(n){(0,l.j)();return(0,c.jsx)("div",{children:"Some Text"})}}}]);
//# sourceMappingURL=1295.9f14e9a9.chunk.js.map